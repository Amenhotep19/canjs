<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
            "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
    <head>
        <title>Controller Example</title>
        <style type='text/css'>

        </style>
    </head>
    <body>
<div id="demo-html">
<form action='' id='createRecipes'>
<input type='text' name='name'/>
<input type='submit' value='Create Recipe'/>
<ul id="list"></ul>
</form>
</div>
<script id="demo-source" type='text/javascript' src='../../node_modules/steal/steal.js' main="@empty">
require("can/control/plugin/plugin");
require("can/model/model");
require("can/util/fixture/fixture");

can.fixture.delay = 2000;
can.fixture("POST /recipes",function(){
  return {};
})

can.Model('Recipe',{
  create : "/recipes"
},{});

can.Control('Creator', {
  "{recipe} created" : function(recipe, event){
    this.element.find('#list').append('<li>'+
      this.element.find('[type=text]').val()+'</li>');
	this.element[0].reset();
    this.element.find("[type=submit]").val("Create Recipe")
    this.update({recipe : new Recipe()});
  },
  "submit" : function(el, ev){
 	ev.preventDefault();
    var recipe = this.options.recipe;
    recipe.attr({ name: $('.name').val() });
	this.element.find("[type=submit]").val("Saving...")
    recipe.save();
  }
});

$('#createRecipes').creator({recipe: new Recipe()})

</script>
    </body>
</html>
