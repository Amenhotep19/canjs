<style>
label {
	display: block;
}

input.error {
	border: 4px solid red;
}

p.error {
	color: red;
}
</style>

<script type="text/stache" id="demo-html">
<form>
	{{#if(phoneNumberError)}}
		<p class="error">{{phoneNumberError}}</p>
	{{/if}}

	<label>
		Phone Number:
		<input type="text" value:bind="userPhoneNumber" {{#if(phoneNumberError)}}class="error"{{/if}}>
	</label>

	<input type="submit" disabled:from="phoneNumberError">
</form>
</script>

<script src="../../node_modules/steal/steal.js" deps-bundle main="@empty" id="demo-source">
import DefineMap from "can-define/map/map";
import stache from "can-stache";
import "can-stache-bindings";

const ViewModel = DefineMap.extend({
	userPhoneNumber: "string",

	get phoneNumber() {
		return this.userPhoneNumber && this.userPhoneNumber.replace(/-/g, "");
	},

	get phoneNumberIsValid() {
		return /[0-9]{3}[0-9]{3}[0-9]{4}/.test(this.phoneNumber);
	},

	get phoneNumberError() {
		if (this.phoneNumber && !this.phoneNumberIsValid) {
			return "Invalid phone number (ex: 123-456-7890).";
		};
	}
});

const scope = new ViewModel({});

const el = document.getElementById("demo-html");
const frag = stache(el.innerHTML)(scope);
document.body.appendChild(frag);
</script>
