<!DOCTYPE html>
<html>
<head>
<meta name="description" content="ATM Guide 3.0 - Final">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>ATM Guide 3.0 - Final</title>
  <link rel="stylesheet" type="text/css" href="./atm.css"/>
  <script src="../../../../node_modules/jquery/dist/jquery.js"></script>
  <script src="../../../../dist/global/can.all.js"></script>
</head>
<body>

<script type='text/stache' id='atm-template'>
<div class="title">
	<h1>canATM</h1>
</div>

<div class="screen">
	<div class="screen-content">
		<div class="screen-glass">

{{#eq state "readingCard"}}
	<h2>Reading Card</h2>
	<p>Welcome to canATM where there are <strong>never</strong>
	  fees!</p>
	</p>
	<p>
		Enter Card Number:
		<input name="card" 	can-blur="addCardNumber"
							can-enter="addCardNumber"/>
	</p>
{{/eq}}

{{#eq state  "readingPin"}}
	<h2>Reading Pin</h2>
	<p>
		Enter Pin Number:
		<input name="pin"
			type="password"
			{{#isVerifyingPin}}DISABLED{{/isVerifyingPin}}
			 can-blur="addPinNumber" can-enter="addPinNumber"/>

		{{#isVerifyingPin}}
		  	<div class='warn'>
				<p>
				<img src="http://www.bristolallheart.com/media/mod_mailchimpsignup/images/ajax-loader.gif"/>
				verifying
				</p>
  			</div>
		{{/isVerifyingPin}}
	</p>
	<a href="javascript://" can-click="exit">exit</a>
{{/eq}}

{{#eq state "choosingTransaction"}}
	<h2>Choose Transaction</h2>
	<p>What would you like to do?</p>
	<nav>
		<ul>
			<li can-click="chooseDeposit">Deposit</li>
			<li can-click="chooseWithdraw">Withdraw</li>
			<li can-click="printReceiptAndExit">Exit</li>
		</ul>
	</nav>
{{/eq}}

{{#eq state  "pickingAccount"}}
	<h2>Pick Account</h2>
	<p>Please pick your account:</p>
	<ul>
		{{#each accounts}}
			<li can-click="chooseAccount">{{name}} - ${{balance}}</li>
		{{/each}}
	</ul>
{{/eq}}

{{#eq state "depositInfo"}}
	<h2>Deposit</h2>
	<p>
		How much would you like to deposit
		into {{currentTransaction.account.name}}
		(${{currentTransaction.account.balance}})?

		<input name="deposit" can-value="currentTransaction.amount"/>
	</p>

	{{#if isTransactionExecuting}}
		<div class='warn'>
			<p>
			<img src="http://www.bristolallheart.com/media/mod_mailchimpsignup/images/ajax-loader.gif"/>
			executing
			</p>
		</div>
	{{else}}
		<button can-click="currentTransaction.execute"
			{{^isTransactionReady}}DISABLED{{/isTransactionReady}}>
			Deposit
		</button>
		<a href="javascript://" can-click="removeTransaction">cancel</a>
	{{/if}}


{{/eq}}

{{#eq state "withdrawalInfo"}}
	<h2>Withdraw</h2>
	<p>
		How much would you like to withdraw
		from {{currentTransaction.account.name}}
		(${{currentTransaction.account.balance}})?

		<input name="withdrawl" can-value="currentTransaction.amount"/>
	</p>
	{{#if isTransactionExecuting}}
		<div class='warn'>
			<p>
			<img src="http://www.bristolallheart.com/media/mod_mailchimpsignup/images/ajax-loader.gif"/>
			executing
			</p>
		</div>
	{{else}}
		<button can-click="currentTransaction.execute"
			{{^isTransactionReady}}DISABLED{{/isTransactionReady}}>
			Withdraw
		</button>
		<a href="javascript://" can-click="removeTransaction">cancel</a>
	{{/if}}
{{/eq}}

{{#eq state "transactionSuccessful"}}
	<h2>Transaction Successful!</h2>
	<p>
		{{currentTransaction.account.name}} has
		${{currentTransaction.account.balance}}.
	</p>
	<p>What would you like to do?</p>
	<nav>
		<ul>
			<li can-click="removeTransaction">Another transaction</li>
			<li can-click="printReceiptAndExit">Exit</li>
		</ul>
	</nav>
{{/eq}}

{{#eq state  "printingReceipt"}}
	<h2>Printing Receipt</h2>
	<h3>Transactions</h3>
	<ul>
		{{#if transactions.length}}
			{{#each transactions}}
				<li>{{actionName}} ${{amount}} from {{account.name}}</li>
			{{/each}}
		{{else}}
			<li>None</li>
		{{/if}}
	</ul>
	<h3>Accounts</h3>
	<ul>
		{{#each accounts}}
			<li can-click="chooseAccount">{{name}} - ${{balance}}</li>
		{{/each}}
	</ul>
	<div class='warn'>
		<p>
			<img src="http://www.bristolallheart.com/media/mod_mailchimpsignup/images/ajax-loader.gif"/>
			printing
		</p>
	</div>
{{/eq}}


		</div>
	</div>
</div>
</script>

<script type='text/stache' id='app-template'>
  <atm-machine/>
</script>

<script src="./atm.js"></script>

<link rel="stylesheet" href="http://code.jquery.com/qunit/qunit-1.12.0.css">
<script src="http://code.jquery.com/qunit/qunit-1.12.0.js"></script>
<div id="qunit"></div>
<div id="qunit-fixture"></div>
<script src="./atm_test.js"></script>

</body>

</html>
